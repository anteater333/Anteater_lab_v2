---
layout: post
title: '쿠버네티스'
date: 2021-11-14 18:20:00 +0900
categories: [Meta]
---

# 추후 다듬어서 포스팅하기

k8s 5회차

추천교재, 쿠버네티스 인 액션 (최근판)  
인 액션 시리즈는 중급 이상 시리즈. 참고로 초판 번역은 엉망이라고 함.  
쿠버네티스 베스트 프랙티스 등 도 존재

## 지난번 내용 리뷰
인그레스.  
인그레스 룰.  
인그레스 컨트롤러.  

## 네임스페이스, 리소스
논리적으로 분리한 클러스터  

모든걸 디폴트 네임스페이스에 배포하는 것은 안티패턴.  
네임스페이스는 메모리등 리소스를 제한 가능하다.  

만약 불가피하게 머신이 한대라면, 쿠버를 하나 만들어서 네임스페이스로 환경을 분리 가능

kubectl로 배포 시 네임스페이스를 옵션으로 주던가 yaml에서 정의할 수 있다.  
근데 kubectl에 옵션으로 주는걸 좀 더 선호한다고 함.  

Pod의 Resource에 Request와 Limit을 지정 가능.  
컨테이너 별로 설정한다.  

실무에서는!  
리퀘스트와 리밋을 동일하게 설정한다.  
pod의 서비스는 무중단, 성능에 대한 퀄리티가 보장되어야 함.  
최소한의 성능을 요청하기 보단, Limit 만큼을 요청하는 것.  

LimitRange  
네임스페이스별 리소스 제한  
ResourceQuata  
pod별 limit 제한을 어떻게 둘 지 min/max 설정 가능  
인프라 담당자 입장에선 이런 디폴트 정책이 중요.  

네임스페이스에 LimitRange를 걸어주면, 해당 네임스페이스에 파드 생성 시 자동적으로 limit 정보 적용됨

ResourceQuota  
네임스페이스에 생성 가능한 오브젝트의 수 제한 가능.  

## Volumes
영구적으로 보관하기 위한 볼륨!  

쿠버는 볼륨 타입이 엄청나게 많다.  

사용에 있어 편의성도 제공한다.  

볼륨은 보통 파드별로 정의하게 된다.  
pod의 yaml에 volumes 설정하면 됨. 마운트 되는 패스 지정해주면 끝.
persistentVolumeClaim. PVC. 파드가 만들어질 때 다이나믹하게 프로비저닝 된 PV를 마운트.  
쿠버의 강력한 기능. storage orchestration.  

https://github.com/fluent/fluentd-kubernetes-daemonset  

Persistent Volumes  
NFC 서버 필요.  
PV 생성, PVC 정의, PVC 파드에 매핑, PVC 요청, 